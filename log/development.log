  [1m[35m (69.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3827160985885456905)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20180409164224)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180409164224"]]
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-04-09 17:01:28.275949"], ["updated_at", "2018-04-09 17:01:28.275949"]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(3827160985885456905)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users" for 186.151.63.221 at 2018-04-09 17:49:26 +0000
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"test0001", "password"=>"[FILTERED]", "name"=>"John"}}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (8.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test0001"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "name", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "test0001"], ["password_digest", "$2a$10$T9gJ803GJa.1mPTcOUALZOKA0lBf0MoL.AoPoWcJ4Yj.9/Ff9phKe"], ["name", "John"], ["auth_token", "Kh8YQdDp4kAko6qkXogSpNJm"], ["created_at", "2018-04-09 17:49:27.365802"], ["updated_at", "2018-04-09 17:49:27.365802"]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 107ms (Views: 0.4ms | ActiveRecord: 19.0ms)


Started POST "/users" for 186.151.63.221 at 2018-04-09 18:01:33 +0000
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"users"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]", "name"=>"black Cat"}, "user"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 3.3ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:17:in `user_params'
app/controllers/users_controller.rb:5:in `create'
Started POST "/users" for 186.151.63.221 at 2018-04-09 18:02:22 +0000
Error occurred while parsing request parameters.
Contents:

{
	"users": {
		"username": "john_hardesky",
		"password": "pass123@$",
		"email": "test_email@nasa.gov"
		"name": "black Cat"
	}
}
  
ActionDispatch::Http::Parameters::ParseError (743: unexpected token at '{
	"users": {
		"username": "john_hardesky",
		"password": "pass123@$",
		"email": "test_email@nasa.gov"
		"name": "black Cat"
	}
}'):
  
actionpack (5.1.6) lib/action_dispatch/http/parameters.rb:115:in `rescue in parse_formatted_parameters'
actionpack (5.1.6) lib/action_dispatch/http/parameters.rb:109:in `parse_formatted_parameters'
actionpack (5.1.6) lib/action_dispatch/http/request.rb:361:in `block in POST'
rack (2.0.4) lib/rack/request.rb:57:in `fetch'
rack (2.0.4) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.1.6) lib/action_dispatch/http/request.rb:360:in `POST'
actionpack (5.1.6) lib/action_controller/metal/params_wrapper.rb:286:in `_wrapper_enabled?'
actionpack (5.1.6) lib/action_controller/metal/params_wrapper.rb:235:in `process_action'
activerecord (5.1.6) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
actionpack (5.1.6) lib/abstract_controller/base.rb:124:in `process'
actionpack (5.1.6) lib/action_controller/metal.rb:189:in `dispatch'
actionpack (5.1.6) lib/action_controller/metal.rb:253:in `dispatch'
actionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (5.1.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:844:in `call'
rack (2.0.4) lib/rack/etag.rb:25:in `call'
rack (2.0.4) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.4) lib/rack/head.rb:12:in `call'
activerecord (5.1.6) lib/active_record/migration.rb:556:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.6) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.4) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.4) lib/rack/sendfile.rb:111:in `call'
railties (5.1.6) lib/rails/engine.rb:522:in `call'
puma (3.11.3) lib/puma/configuration.rb:225:in `call'
puma (3.11.3) lib/puma/server.rb:624:in `handle_request'
puma (3.11.3) lib/puma/server.rb:438:in `process_client'
puma (3.11.3) lib/puma/server.rb:302:in `block in run'
puma (3.11.3) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/users" for 186.151.63.221 at 2018-04-09 18:02:24 +0000
Processing by UsersController#create as */*
  Parameters: {"users"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]", "email"=>"test_email@nasa.gov", "name"=>"black Cat"}, "user"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:17:in `user_params'
app/controllers/users_controller.rb:5:in `create'
Started POST "/users" for 186.151.63.221 at 2018-04-09 18:02:36 +0000
Processing by UsersController#create as */*
  Parameters: {"users"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]", "email"=>"test_email@nasa.gov", "name"=>"black Cat"}, "user"=>{}}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:17:in `user_params'
app/controllers/users_controller.rb:5:in `create'
Started POST "/users" for 186.151.63.221 at 2018-04-09 18:03:11 +0000
Processing by UsersController#create as */*
  Parameters: {"users"=>{"username"=>"john_hardesky_new", "password"=>"[FILTERED]", "email"=>"test_email@nasa.gov", "name"=>"BCat"}, "user"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:17:in `user_params'
app/controllers/users_controller.rb:5:in `create'
Started POST "/users" for 186.151.63.221 at 2018-04-09 18:03:37 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]", "email"=>"test_email@nasa.gov", "name"=>"BCat"}}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "john_hardesky"], ["password_digest", "$2a$10$bCYxQQ0sA31ikESjJotLX.Mu8l/rg0U4b30q52fZqvd.XfWnKBu7i"], ["email", "test_email@nasa.gov"], ["name", "BCat"], ["auth_token", "1j4LA84aDdyPN3ecKaUtiGJ5"], ["created_at", "2018-04-09 18:03:38.055659"], ["updated_at", "2018-04-09 18:03:38.055659"]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 104ms (Views: 0.4ms | ActiveRecord: 10.6ms)


Started POST "/login" for 186.151.63.221 at 2018-04-09 18:13:40 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"john_hardesky", "password"=>"[FILTERED]", "session"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
  [1m[35m (29.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "john_hardesky"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "icTh3EcTFWyyXJH4NpckkwAP"], ["updated_at", "2018-04-09 18:13:41.061627"], ["id", 2]]
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 133ms (Views: 0.8ms | ActiveRecord: 37.1ms)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (397.0ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (222.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35mSQL (2.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180409164224)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-22 21:22:52.361057"], ["updated_at", "2023-01-22 21:22:52.361057"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f8d186aa9860b8add205e6bd5576d7b27456b72b"], ["created_at", "2023-01-22 21:22:52.367907"], ["updated_at", "2023-01-22 21:22:52.367907"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180409164224)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-22 21:22:52.449371"], ["updated_at", "2023-01-22 21:22:52.449371"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (1.5ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2023-01-22 21:22:52.451850"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f8d186aa9860b8add205e6bd5576d7b27456b72b"], ["created_at", "2023-01-22 21:22:52.455608"], ["updated_at", "2023-01-22 21:22:52.455608"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/" for ::1 at 2023-01-22 21:33:10 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/railties-7.0.4.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/railties-7.0.4.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 32.8ms | Allocations: 551)
Completed 200 OK in 93ms (Views: 62.2ms | ActiveRecord: 0.0ms | Allocations: 3046)


Started GET "/users" for ::1 at 2023-01-22 21:35:32 +0000
  
AbstractController::ActionNotFound (The action 'index' could not be found for UsersController):
  
actionpack (7.0.4.1) lib/abstract_controller/base.rb:146:in `process'
actionview (7.0.4.1) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4.1) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4.1) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4.1) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4.1) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.6.2) lib/rack/etag.rb:27:in `call'
rack (2.2.6.2) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.6.2) lib/rack/head.rb:12:in `call'
activerecord (7.0.4.1) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4.1) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4.1) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4.1) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4.1) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.6.2) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.6.2) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4.1) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4.1) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/users" for ::1 at 2023-01-22 21:37:56 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]", "email"=>"test_email@nasa.gov", "name"=>"BCat"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "john_hardesky"], ["password_digest", "[FILTERED]"], ["email", "test_email@nasa.gov"], ["name", "BCat"], ["auth_token", "gBey9JEE67xKDu2YADCLup83"], ["created_at", "2023-01-22 21:37:56.808639"], ["updated_at", "2023-01-22 21:37:56.808639"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 241ms (Views: 0.2ms | ActiveRecord: 11.0ms | Allocations: 8252)


Started POST "/login?token=gBey9JEE67xKDu2YADCLup83&Authorization%20Token=gBey9JEE67xKDu2YADCLup83" for ::1 at 2023-01-22 21:39:36 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"john_hardesky", "password"=>"[FILTERED]", "token"=>"gBey9JEE67xKDu2YADCLup83", "Authorization Token"=>"gBey9JEE67xKDu2YADCLup83", "session"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "john_hardesky"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "neQTPZxbVviafBFzmhbNeU2L"], ["updated_at", "2023-01-22 21:39:36.219240"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 204ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1374)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDepositAndRoleToUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mALTER TABLE "users" ADD "deposit" decimal[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "productName" character varying, "amountAvailable" integer, "cost" decimal, "sellerId" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (205.2ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (206.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" decimal, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" decimal, "role" character varying)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180409164224),
(20230122214706);

[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-22 23:17:45.819929"], ["updated_at", "2023-01-22 23:17:45.819929"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "a58623065e405c9165e2d4556429b906c18d1faa"], ["created_at", "2023-01-22 23:17:45.823854"], ["updated_at", "2023-01-22 23:17:45.823854"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" decimal, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" decimal, "role" character varying)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180409164224),
(20230122214706);

[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-22 23:17:45.899973"], ["updated_at", "2023-01-22 23:17:45.899973"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2023-01-22 23:17:45.902180"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "a58623065e405c9165e2d4556429b906c18d1faa"], ["created_at", "2023-01-22 23:17:45.903981"], ["updated_at", "2023-01-22 23:17:45.903981"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (4.7ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_name", "Test"], ["amount_available", 2], ["cost", "5.0"], ["created_at", "2023-01-23 21:37:59.516204"], ["updated_at", "2023-01-23 21:37:59.516204"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_name", "Test"], ["amount_available", -1], ["cost", "5.0"], ["created_at", "2023-01-23 21:40:17.348915"], ["updated_at", "2023-01-23 21:40:17.348915"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_name", "Test"], ["amount_available", -1], ["cost", "0.0"], ["created_at", "2023-01-23 21:41:14.299403"], ["updated_at", "2023-01-23 21:41:14.299403"]]
  [1m[36mTRANSACTION (9.0ms)[0m  [1m[35mCOMMIT[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (383.5ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (203.3ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35mSQL (3.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (20.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" integer, "role" character varying)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (97.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180409164224),
(20230122214706);

[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 21:47:23.756163"], ["updated_at", "2023-01-23 21:47:23.756163"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f0aa6a5fae8504c5251c9175787663bd63b43be5"], ["created_at", "2023-01-23 21:47:23.761234"], ["updated_at", "2023-01-23 21:47:23.761234"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" integer, "role" character varying)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180409164224),
(20230122214706);

[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 21:47:23.844068"], ["updated_at", "2023-01-23 21:47:23.844068"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (2.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2023-01-23 21:47:23.846397"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f0aa6a5fae8504c5251c9175787663bd63b43be5"], ["created_at", "2023-01-23 21:47:23.850900"], ["updated_at", "2023-01-23 21:47:23.850900"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (205.1ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (205.9ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" integer, "role" character varying)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230122214706);

[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 21:50:08.240842"], ["updated_at", "2023-01-23 21:50:08.240842"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f0aa6a5fae8504c5251c9175787663bd63b43be5"], ["created_at", "2023-01-23 21:50:08.245678"], ["updated_at", "2023-01-23 21:50:08.245678"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "deposit" integer, "role" character varying)[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230122214706);

[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 21:50:08.326002"], ["updated_at", "2023-01-23 21:50:08.326002"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2023-01-23 21:50:08.328294"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f0aa6a5fae8504c5251c9175787663bd63b43be5"], ["created_at", "2023-01-23 21:50:08.330247"], ["updated_at", "2023-01-23 21:50:08.330247"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (213.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (218.6ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" character varying, "deposit" integer, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 21:52:10.670368"], ["updated_at", "2023-01-23 21:52:10.670368"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (239.7ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (215.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" integer, "deposit" integer, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 22:05:05.553108"], ["updated_at", "2023-01-23 22:05:05.553108"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "deposit", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "test"], ["password_digest", "[FILTERED]"], ["email", "test@mail.com"], ["role", 1], ["deposit", 0], ["auth_token", "sdEvP44PHY6EqmW6tfBTyoSZ"], ["created_at", "2023-01-23 22:09:34.009796"], ["updated_at", "2023-01-23 22:09:34.009796"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (199.9ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (184.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" integer, "deposit" integer, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-23 23:00:17.690526"], ["updated_at", "2023-01-23 23:00:17.690526"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "deposit", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "test"], ["password_digest", "[FILTERED]"], ["email", "test@mail.com"], ["role", 1], ["deposit", 0], ["auth_token", "VQVQi1c9oeGuNKY9dQq4aFoZ"], ["created_at", "2023-01-23 23:01:20.210107"], ["updated_at", "2023-01-23 23:01:20.210107"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Test"], ["amount_available", 2], ["cost", 5], ["seller_id", 1], ["created_at", "2023-01-23 23:01:34.100924"], ["updated_at", "2023-01-23 23:01:34.100924"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."seller_id" = $1[0m  [["seller_id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."seller_id" = $1[0m  [["seller_id", 1]]
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Test"], ["amount_available", 2], ["cost", 6], ["seller_id", 1], ["created_at", "2023-01-23 23:31:30.376688"], ["updated_at", "2023-01-23 23:31:30.376688"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (215.4ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (191.7ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (20.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" integer, "deposit" integer, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-25 01:17:37.758172"], ["updated_at", "2023-01-25 01:17:37.758172"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-25 01:26:57 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 219ms (ActiveRecord: 8.3ms | Allocations: 8348)


  
NoMethodError (undefined method `%' for nil:NilClass):
  
config/initializers/cost_validations.rb:3:in `validate_multipleness'
app/models/user.rb:9:in `block in <class:User>'
app/controllers/users_controller.rb:8:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-25 01:27:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 43288ms (ActiveRecord: 5.4ms | Allocations: 114130)


  
NoMethodError (undefined method `%' for nil:NilClass):
  
config/initializers/cost_validations.rb:4:in `validate_multipleness'
app/models/user.rb:9:in `block in <class:User>'
app/controllers/users_controller.rb:8:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (99.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_development"[0m
  [1m[35m (97.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_test"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (184.9ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (190.6ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "product_name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-25 01:30:48.171507"], ["updated_at", "2023-01-25 01:30:48.171507"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-25 01:31:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos", "role"=>"Buyer"}}
Completed 500 Internal Server Error in 208ms (ActiveRecord: 3.8ms | Allocations: 6631)


  
ArgumentError ('Buyer' is not a valid role):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-25 01:32:01 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "mingos"], ["password_digest", "[FILTERED]"], ["email", "mingos@mail.com"], ["name", "Domingos"], ["auth_token", "e5mJ1ZgXr2drCWB41r3ce7XQ"], ["created_at", "2023-01-25 01:32:02.159099"], ["updated_at", "2023-01-25 01:32:02.159099"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 201ms (Views: 0.3ms | ActiveRecord: 2.5ms | Allocations: 2763)


Started POST "/login" for ::1 at 2023-01-25 01:32:30 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"john_hardesky", "password"=>"[FILTERED]", "session"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 570)


Started POST "/login?token=e5mJ1ZgXr2drCWB41r3ce7XQ&Authorization%20Token=e5mJ1ZgXr2drCWB41r3ce7XQ" for ::1 at 2023-01-25 01:32:40 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"john_hardesky", "password"=>"[FILTERED]", "token"=>"e5mJ1ZgXr2drCWB41r3ce7XQ", "Authorization Token"=>"e5mJ1ZgXr2drCWB41r3ce7XQ", "session"=>{"username"=>"john_hardesky", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "john_hardesky"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 2418)


Started POST "/login" for ::1 at 2023-01-25 01:32:54 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (3.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "sQmWEtU92N9cUeRRHgY3DZcX"], ["updated_at", "2023-01-25 01:32:55.177876"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 205ms (Views: 0.4ms | ActiveRecord: 7.1ms | Allocations: 3425)


Started POST "/login" for ::1 at 2023-01-25 01:33:15 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "k5DbaRvrjawREUHvFaDEZxiL"], ["updated_at", "2023-01-25 01:33:15.316001"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 196ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 803)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:43:39 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 42ms (ActiveRecord: 5.1ms | Allocations: 9953)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/sessions_controller.rb:9:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:44:17 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 36ms (ActiveRecord: 5.0ms | Allocations: 9958)


  
ArgumentError (wrong number of arguments (given 2, expected 0)):
  
app/models/user.rb:26:in `validate_login'
app/controllers/sessions_controller.rb:6:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:45:11 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 54ms (ActiveRecord: 4.9ms | Allocations: 9980)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/sessions_controller.rb:6:in `create'
Started POST "/users" for ::1 at 2023-01-25 01:48:13 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 209ms (ActiveRecord: 1.3ms | Allocations: 4531)


  
ActiveRecord::RecordInvalid (Validation failed: Username has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/login" for ::1 at 2023-01-25 01:48:21 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.2ms | Allocations: 4523)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/sessions_controller.rb:6:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:48:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 52352ms (ActiveRecord: 5.7ms | Allocations: 126815)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/sessions_controller.rb:6:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:50:35 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26448ms (ActiveRecord: 5.4ms | Allocations: 125721)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/sessions_controller.rb:6:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:51:49 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 45ms (ActiveRecord: 5.1ms | Allocations: 9978)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/sessions_controller.rb:10:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:52:27 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 30ms (ActiveRecord: 5.1ms | Allocations: 10002)


  
NoMethodError (undefined method `errors' for #<SessionsController:0x00000000007418>):
  
app/controllers/sessions_controller.rb:11:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/login" for ::1 at 2023-01-25 01:53:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 31ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 10173)


Started POST "/logout/all" for ::1 at 2023-01-25 01:54:40 +0000
  
ActionController::RoutingError (No route matches [POST] "/logout/all"):
  
Started DELETE "/logout/all" for ::1 at 2023-01-25 01:54:51 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 128)


  
NoMethodError (undefined method `invalidate_auth_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:33:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
Started GET "/login" for ::1 at 2023-01-25 01:56:26 +0000
  
ActionController::RoutingError (No route matches [GET] "/login"):
  
Started POST "/login" for ::1 at 2023-01-25 01:56:32 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 264)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:00:02 +0000
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 84)


  
NoMethodError (undefined method `invalidate_auth_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:33:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:00:32 +0000
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 84)


  
NoMethodError (undefined method `invalidate_auth_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:33:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:03:00 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 177)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:33:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:04:17 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 163)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:33:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:04:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 52641ms (ActiveRecord: 0.0ms | Allocations: 105084)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:07:19 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 25328ms (ActiveRecord: 0.0ms | Allocations: 108248)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:08:43 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 34629ms (ActiveRecord: 0.0ms | Allocations: 105281)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:09:27 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 34850ms (ActiveRecord: 0.0ms | Allocations: 105957)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:10:11 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Completed 500 Internal Server Error in 2351ms (ActiveRecord: 0.0ms | Allocations: 105384)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:18:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:11:11 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 14564ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 113079)


Started POST "/login" for ::1 at 2023-01-25 02:12:23 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 31ms (Views: 0.1ms | ActiveRecord: 4.9ms | Allocations: 10462)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:13:36 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 11692ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 116187)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:13:53 +0000
Processing by SessionsController#destroy as */*
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 7212ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 19140)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:14:18 +0000
Processing by SessionsController#destroy as */*
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 131412ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 14612)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:16:48 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 6721ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 115422)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:17:14 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1746ms (ActiveRecord: 6.4ms | Allocations: 115998)


  
NoMethodError (undefined method `invalidate_token' for nil:NilClass):
  
app/controllers/sessions_controller.rb:34:in `logout'
app/controllers/sessions_controller.rb:19:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:17:55 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 32ms (ActiveRecord: 7.3ms | Allocations: 10233)


Started POST "/login" for ::1 at 2023-01-25 02:18:05 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "bows15mq1wcUetv5CyEQQ7wG"], ["updated_at", "2023-01-25 02:18:06.186509"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 195ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 1853)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:18:09 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 3ms (ActiveRecord: 0.9ms | Allocations: 316)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:18:40 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 223ms (Views: 2.0ms | ActiveRecord: 3.8ms | Allocations: 4647)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 02:24:29 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 200 OK in 232ms (Views: 0.2ms | ActiveRecord: 6.4ms | Allocations: 10156)


Started POST "/login" for ::1 at 2023-01-25 02:24:33 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "AxiPznN9ZjQKr4wnkqnpg1zj"], ["updated_at", "2023-01-25 02:24:33.927076"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 208ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1878)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:24:35 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 410)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:24:45 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 200 OK in 240ms (Views: 0.1ms | ActiveRecord: 4.7ms | Allocations: 4493)


Started POST "/login" for ::1 at 2023-01-25 02:24:48 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "51vWfyCqBzuxHcsPbY4LNEmw"], ["updated_at", "2023-01-25 02:24:48.537596"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 209ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1145)


Started DELETE "/logout/all" for ::1 at 2023-01-25 02:24:50 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 338)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 18:21:09 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 65ms (ActiveRecord: 10.9ms | Allocations: 10206)


  
NameError (undefined local variable or method `user' for #<User id: 1, username: "mingos", password_digest: [FILTERED], email: "mingos@mail.com", name: "Domingos", role: "buyer", deposit: 0, auth_token: nil, created_at: "2023-01-25 01:32:02.159099000 +0000", updated_at: "2023-01-25 02:24:48.537596000 +0000">):
  
app/models/user.rb:18:in `validate_login'
app/controllers/sessions_controller.rb:30:in `get_user'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 18:22:15 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 61ms (ActiveRecord: 5.2ms | Allocations: 10201)


  
NameError (undefined local variable or method `user' for #<User id: 1, username: "mingos", password_digest: [FILTERED], email: "mingos@mail.com", name: "Domingos", role: "buyer", deposit: 0, auth_token: nil, created_at: "2023-01-25 01:32:02.159099000 +0000", updated_at: "2023-01-25 02:24:48.537596000 +0000">):
  
app/models/user.rb:18:in `validate_login'
app/controllers/sessions_controller.rb:30:in `get_user'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 18:22:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 223ms (ActiveRecord: 5.0ms | Allocations: 10021)


  
NameError (undefined local variable or method `user' for #<SessionsController:0x00000000007440>):
  
app/controllers/sessions_controller.rb:17:in `destroy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-25 18:23:43 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 200 OK in 218ms (Views: 0.2ms | ActiveRecord: 6.3ms | Allocations: 10167)


Started POST "/login" for ::1 at 2023-01-25 18:23:53 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (2.7ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "BTkfVcdeJWPb9LU7h7SUMC6w"], ["updated_at", "2023-01-25 18:23:53.291644"], ["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 201ms (Views: 0.1ms | ActiveRecord: 4.5ms | Allocations: 1878)


Started POST "/login" for ::1 at 2023-01-25 18:24:06 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 287)


Started DELETE "/logout/all" for ::1 at 2023-01-25 18:24:22 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 4652)


Started DELETE "/logout/all" for ::1 at 2023-01-25 18:24:23 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 200 OK in 193ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 255)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-25 18:31:58 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 239ms (ActiveRecord: 8.6ms | Allocations: 11264)


  
ActiveRecord::RecordInvalid (Validation failed: Username has already been taken, Email has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-25 18:32:11 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos1", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos1"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 191ms (ActiveRecord: 0.7ms | Allocations: 1116)


  
ActiveRecord::RecordInvalid (Validation failed: Email has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-25 18:32:17 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos1@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos1@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 193ms (ActiveRecord: 0.7ms | Allocations: 1115)


  
ActiveRecord::RecordInvalid (Validation failed: Username has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-25 18:32:24 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos1", "password"=>"[FILTERED]", "email"=>"mingos1@mail.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos1"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos1@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "mingos1"], ["password_digest", "[FILTERED]"], ["email", "mingos1@mail.com"], ["name", "Domingos"], ["auth_token", "B9UazMJkkavMKVotZgh93h3K"], ["created_at", "2023-01-25 18:32:24.476546"], ["updated_at", "2023-01-25 18:32:24.476546"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 197ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 1646)


Started POST "/users" for ::1 at 2023-01-25 18:32:34 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos2", "password"=>"[FILTERED]", "email"=>"mingos1ma1il.com", "name"=>"Domingos", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos2"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos1ma1il.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 192ms (ActiveRecord: 0.7ms | Allocations: 1167)


  
ActiveRecord::RecordInvalid (Validation failed: Email is invalid):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/login" for ::1 at 2023-01-25 18:33:38 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "scMfjKKS3LSNmhinbaxRK4ss"], ["updated_at", "2023-01-25 18:33:38.863967"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 197ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 1633)


Started POST "/login" for ::1 at 2023-01-25 18:33:46 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos1", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos1", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos1"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 264)


Started DELETE "/logout/all" for ::1 at 2023-01-25 18:33:50 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 354)


Started POST "/login" for ::1 at 2023-01-25 18:33:58 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["updated_at", "2023-01-25 18:33:58.608084"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 196ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1010)


Started GET "/users/1" for ::1 at 2023-01-25 18:34:55 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 125)


Started GET "/users/2" for ::1 at 2023-01-25 18:34:59 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 100)


Started GET "/users/1" for ::1 at 2023-01-25 18:35:01 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 100)


Started GET "/users/1" for ::1 at 2023-01-25 18:35:20 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 100)


Started GET "/users/1" for ::1 at 2023-01-25 18:37:26 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 100)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users/1" for ::1 at 2023-01-25 18:40:19 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 0.2ms | ActiveRecord: 5.0ms | Allocations: 10302)


Started GET "/users/1" for ::1 at 2023-01-25 18:40:23 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms | Allocations: 448)


  
ActiveRecord::RecordNotFound (Couldn't find User with [WHERE "users"."auth_token" IS NULL]):
  
app/controllers/users_controller.rb:48:in `get_user'
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users/1" for ::1 at 2023-01-25 18:44:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Completed 404 Not Found in 23ms (ActiveRecord: 5.0ms | Allocations: 4910)


  
ActiveRecord::RecordNotFound (Couldn't find User with [WHERE "users"."auth_token" IS NULL]):
  
app/controllers/users_controller.rb:48:in `get_user'
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users/1" for ::1 at 2023-01-25 18:44:56 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Filter chain halted as :get_user rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 0.3ms | ActiveRecord: 2.0ms | Allocations: 4920)


Started GET "/users/1" for ::1 at 2023-01-25 18:45:56 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 4.7ms | Allocations: 5740)


Started GET "/users/2" for ::1 at 2023-01-25 18:46:41 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 251)


Started GET "/users/1" for ::1 at 2023-01-25 18:46:45 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 262)


Started GET "/users/3" for ::1 at 2023-01-25 18:46:50 +0000
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.3ms | Allocations: 262)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users/3" for ::1 at 2023-01-25 18:51:57 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/users/3"):
  
Started GET "/profile" for ::1 at 2023-01-25 18:52:06 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 5.0ms | Allocations: 10251)


Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 18:54:17 +0000
  
SyntaxError (/mnt/c/Repos/VendingMachine/app/controllers/users_controller.rb:30: syntax error, unexpected local variable or method, expecting `then' or ';' or '\n'
... && CoinsToUse.include? deposit
...                        ^~~~~~~
):
  
app/controllers/users_controller.rb:30: syntax error, unexpected local variable or method, expecting `then' or ';' or '\n'
app/controllers/users_controller.rb:30: syntax error, unexpected local variable or method, expecting `then' or ';' or '\n'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 18:55:03 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 28ms (ActiveRecord: 5.5ms | Allocations: 10132)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/users_controller.rb:47:in `user_params'
app/controllers/users_controller.rb:29:in `deposit'
Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 18:55:29 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 3.1ms | Allocations: 4624)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/users_controller.rb:30:in `is_a?'
app/controllers/users_controller.rb:30:in `deposit'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 18:57:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 60ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 12095)


Started POST "/deposit?deposit=5,8" for ::1 at 2023-01-25 18:58:00 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5,8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 268)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5,8" for ::1 at 2023-01-25 19:00:16 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5,8"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 119573ms (Views: 0.6ms | ActiveRecord: 5.6ms | Allocations: 122963)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5,8" for ::1 at 2023-01-25 19:02:31 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5,8"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 30706ms (ActiveRecord: 5.1ms | Allocations: 125069)


  
TypeError (class or module required):
  
app/controllers/users_controller.rb:31:in `is_a?'
app/controllers/users_controller.rb:31:in `deposit'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5,8" for ::1 at 2023-01-25 19:08:52 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5,8"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 7130ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 119615)


Started POST "/deposit?deposit=saaaasa" for ::1 at 2023-01-25 19:09:07 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"saaaasa"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 2304ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 8564)


Started POST "/deposit?deposit=4444444s" for ::1 at 2023-01-25 19:09:22 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"4444444s"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 3286ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 8470)


Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 19:09:34 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 2477ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 9041)


Started POST "/deposit?deposit=1" for ::1 at 2023-01-25 19:09:40 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 12680ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 19018)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:10:21 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 31ms (Views: 0.2ms | ActiveRecord: 5.1ms | Allocations: 12100)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:12:09 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 38860ms (Views: 0.2ms | ActiveRecord: 4.7ms | Allocations: 133867)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:15:10 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3221ms (ActiveRecord: 4.8ms | Allocations: 119646)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/users_controller.rb:32:in `+'
app/controllers/users_controller.rb:32:in `deposit'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:16:08 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 5], ["updated_at", "2023-01-25 19:16:08.636577"], ["id", 1]]
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
No template found for UsersController#deposit, rendering head :no_content
Completed 204 No Content in 50ms (ActiveRecord: 15.3ms | Allocations: 12458)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=20" for ::1 at 2023-01-25 19:16:55 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 25], ["updated_at", "2023-01-25 19:16:56.071252"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 58ms (Views: 2.1ms | ActiveRecord: 9.8ms | Allocations: 12137)


Started POST "/deposit?deposit=200" for ::1 at 2023-01-25 19:16:59 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"200"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2065)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:17:02 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 125], ["updated_at", "2023-01-25 19:17:02.782880"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 1033)


Started POST "/reset" for ::1 at 2023-01-25 19:27:56 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-25 19:27:56.525146"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 43ms (Views: 0.1ms | ActiveRecord: 9.3ms | Allocations: 3856)


Started GET "/profile" for ::1 at 2023-01-25 19:28:01 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 258)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:05 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-25 19:28:05.106872"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:05 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-25 19:28:05.973602"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:06 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-25 19:28:06.569212"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:07 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 400], ["updated_at", "2023-01-25 19:28:07.114295"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:07 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 500], ["updated_at", "2023-01-25 19:28:07.591185"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 1022)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:28:08 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 600], ["updated_at", "2023-01-25 19:28:08.109526"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1019)


Started GET "/profile" for ::1 at 2023-01-25 19:28:09 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 257)


Started POST "/reset" for ::1 at 2023-01-25 19:28:11 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-25 19:28:11.805050"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1002)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/profile" for ::1 at 2023-01-25 19:29:40 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 10294)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:42 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-25 19:29:42.541285"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 2091)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:42 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-25 19:29:42.915980"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:43 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-25 19:29:43.255185"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:43 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 400], ["updated_at", "2023-01-25 19:29:43.615932"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:44 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 500], ["updated_at", "2023-01-25 19:29:44.009006"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1022)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:29:44 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 600], ["updated_at", "2023-01-25 19:29:44.486659"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/reset" for ::1 at 2023-01-25 19:30:01 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-25 19:30:01.735973"], ["id", 1]]
  [1m[36mTRANSACTION (56.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 65ms (Views: 0.1ms | ActiveRecord: 57.2ms | Allocations: 2828)


Started POST "/deposit?deposit=655" for ::1 at 2023-01-25 19:30:11 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"655"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 266)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:30:17 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-25 19:30:17.331274"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:30:17 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-25 19:30:17.973549"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:30:18 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-25 19:30:18.770715"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:30:19 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 400], ["updated_at", "2023-01-25 19:30:19.382113"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1019)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:30:20 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 500], ["updated_at", "2023-01-25 19:30:20.062368"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/deposit?deposit=50" for ::1 at 2023-01-25 19:30:23 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 550], ["updated_at", "2023-01-25 19:30:23.815367"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1019)


Started POST "/deposit?deposit=50" for ::1 at 2023-01-25 19:30:24 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 600], ["updated_at", "2023-01-25 19:30:24.506512"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/deposit?deposit=50" for ::1 at 2023-01-25 19:30:25 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 650], ["updated_at", "2023-01-25 19:30:25.397625"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1000)


Started POST "/deposit?deposit=10" for ::1 at 2023-01-25 19:30:28 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 660], ["updated_at", "2023-01-25 19:30:28.747385"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1019)


Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:30:31 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 665], ["updated_at", "2023-01-25 19:30:31.731205"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1019)


Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:30:33 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 670], ["updated_at", "2023-01-25 19:30:33.914569"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1019)


Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:30:34 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 675], ["updated_at", "2023-01-25 19:30:34.437466"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1000)


Started POST "/reset" for ::1 at 2023-01-25 19:30:37 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-25 19:30:37.404175"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1024)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=5" for ::1 at 2023-01-25 19:31:44 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"5"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 5], ["updated_at", "2023-01-25 19:31:44.554194"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 6.8ms | Allocations: 12144)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:31:48 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 105], ["updated_at", "2023-01-25 19:31:48.499327"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1036)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:31:48 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 205], ["updated_at", "2023-01-25 19:31:48.864919"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1033)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-25 19:31:49 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 305], ["updated_at", "2023-01-25 19:31:49.533366"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1033)


Started POST "/deposit?deposit=50" for ::1 at 2023-01-25 19:31:53 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 355], ["updated_at", "2023-01-25 19:31:53.464997"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1033)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-25 19:31:55 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 375], ["updated_at", "2023-01-25 19:31:55.515415"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 1019)


Started POST "/deposit?deposit=10" for ::1 at 2023-01-25 19:32:00 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 385], ["updated_at", "2023-01-25 19:32:00.091763"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1000)


Started POST "/deposit?deposit=0" for ::1 at 2023-01-25 19:32:05 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"0"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 2049)


Started POST "/reset" for ::1 at 2023-01-25 19:32:09 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-25 19:32:09.545702"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1048)


  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/reset" for ::1 at 2023-01-25 19:44:31 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 64ms (Views: 2.7ms | ActiveRecord: 5.7ms | Allocations: 13536)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/reset" for ::1 at 2023-01-25 19:45:56 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#reset as */*
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 401 Unauthorized in 29ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 10324)


Started POST "/reset" for ::1 at 2023-01-25 20:00:13 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Completed 401 Unauthorized in 45ms (Views: 0.1ms | ActiveRecord: 9.3ms | Allocations: 3071)


Started POST "/users" for ::1 at 2023-01-25 20:00:42 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"admin", "password"=>"[FILTERED]", "email"=>"admin@mail.com", "name"=>"Admin", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "admin"], ["password_digest", "[FILTERED]"], ["email", "admin@mail.com"], ["name", "Admin"], ["role", 0], ["auth_token", "R3dRqCgYRApBBeCq5MYo3AdH"], ["created_at", "2023-01-25 20:00:42.627635"], ["updated_at", "2023-01-25 20:00:42.627635"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 198ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 2013)


Started POST "/users" for ::1 at 2023-01-25 20:01:15 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"stocker", "password"=>"[FILTERED]", "email"=>"stocker@mail.com", "name"=>"Stocker", "role"=>"stocker"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stocker"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stocker@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "name", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["username", "stocker"], ["password_digest", "[FILTERED]"], ["email", "stocker@mail.com"], ["name", "Stocker"], ["role", 2], ["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["created_at", "2023-01-25 20:01:15.693556"], ["updated_at", "2023-01-25 20:01:15.693556"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 199ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 1007)


Started POST "/reset" for ::1 at 2023-01-25 20:01:37 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Filter chain halted as :check_if_buyer rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 266)


Started POST "/deposit?deposit=10" for ::1 at 2023-01-25 20:01:43 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Filter chain halted as :check_if_buyer rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 256)


Started GET "/profile" for ::1 at 2023-01-25 20:01:54 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 269)


Started GET "/profile" for ::1 at 2023-01-25 20:06:27 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 258)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/profile" for ::1 at 2023-01-25 22:21:10 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 5.0ms | Allocations: 10687)


  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-25 22:28:06 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
Filter chain halted as :require_login rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 411)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:22:42 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 198)


  
NoMethodError (undefined method `stocker?' for nil:NilClass):
  
app/controllers/products_controller.rb:75:in `check_if_stocker'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:37:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Filter chain halted as :check_if_stocker rendered or redirected
Completed 401 Unauthorized in 53ms (Views: 0.2ms | ActiveRecord: 5.1ms | Allocations: 10148)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:38:29 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Filter chain halted as :check_if_stocker rendered or redirected
Completed 401 Unauthorized in 7041ms (Views: 0.3ms | ActiveRecord: 5.0ms | Allocations: 120460)


  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:39:04 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Filter chain halted as :check_if_stocker rendered or redirected
Completed 401 Unauthorized in 48ms (Views: 0.2ms | ActiveRecord: 5.0ms | Allocations: 9649)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:40:31 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Filter chain halted as :check_if_stocker rendered or redirected
Completed 401 Unauthorized in 27166ms (Views: 0.3ms | ActiveRecord: 5.0ms | Allocations: 120808)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 00:41:30 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 347813ms (ActiveRecord: 7.7ms | Allocations: 125933)


  
NameError (Rails couldn't find a valid model for user association. Please provide the :class_name option on the association declaration. If :class_name is already provided, make sure it's an ActiveRecord::Base subclass.):
  
app/controllers/products_controller.rb:18:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 01:08:39 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Kit Kat"], ["amount_available", 10], ["cost", 85], ["seller_id", 4], ["created_at", "2023-01-26 01:08:44.579099"], ["updated_at", "2023-01-26 01:08:44.579099"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  Rendering products/show.json.jbuilder
  Rendered products/_product.json.jbuilder (Duration: 4.1ms | Allocations: 247)
  Rendered products/show.json.jbuilder (Duration: 15.4ms | Allocations: 937)
Completed 201 Created in 4818ms (Views: 61.5ms | ActiveRecord: 10.6ms | Allocations: 130546)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 01:14:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Kit Kat", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Kit Kat"], ["amount_available", 10], ["cost", 85], ["seller_id", 4], ["created_at", "2023-01-26 01:14:59.477985"], ["updated_at", "2023-01-26 01:14:59.477985"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 49ms (ActiveRecord: 9.4ms | Allocations: 15644)


  
NameError (undefined local variable or method `product' for #<ProductsController:0x00000000007198>):
  
app/controllers/products_controller.rb:71:in `render_json_product'
app/controllers/products_controller.rb:21:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 01:15:32 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Twix", "amount_available"=>10, "cost"=>85}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Twix"], ["amount_available", 10], ["cost", 85], ["seller_id", 4], ["created_at", "2023-01-26 01:15:33.219713"], ["updated_at", "2023-01-26 01:15:33.219713"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 9.6ms | Allocations: 15832)


Started POST "/products" for ::1 at 2023-01-26 01:16:00 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>0, "cost"=>95}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Mars"], ["amount_available", 0], ["cost", 95], ["seller_id", 4], ["created_at", "2023-01-26 01:16:00.310110"], ["updated_at", "2023-01-26 01:16:00.310110"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 749)


Started POST "/products" for ::1 at 2023-01-26 01:16:14 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>0, "cost"=>94}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 518)


Started POST "/products" for ::1 at 2023-01-26 01:21:44 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>0, "cost"=>94}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 39ms (Views: 0.2ms | ActiveRecord: 6.7ms | Allocations: 3286)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 01:31:49 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>0, "cost"=>94}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 400 Bad Request in 48ms (Views: 0.2ms | ActiveRecord: 7.3ms | Allocations: 17218)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/profile" for ::1 at 2023-01-26 01:36:21 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 10308)


Started POST "/login" for ::1 at 2023-01-26 01:36:27 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 469)


Started DELETE "/logout/all" for ::1 at 2023-01-26 01:36:31 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 4814)


Started POST "/login" for ::1 at 2023-01-26 01:36:34 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["updated_at", "2023-01-26 01:36:34.744227"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 197ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 1971)


Started POST "/deposit?deposit=10" for ::1 at 2023-01-26 01:36:51 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 10], ["updated_at", "2023-01-26 01:36:51.105623"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 1302)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 01:36:59 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 110], ["updated_at", "2023-01-26 01:36:59.626065"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.4ms | Allocations: 1028)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:39:53 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 333)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:41:26 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "Mw56sQhiUnCNJcwE645ABRhy"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 19ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 5569)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:42:12 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 49ms (ActiveRecord: 7.2ms | Allocations: 12582)


  
NoMethodError (undefined method `*' for nil:NilClass):
  
app/controllers/products_controller.rb:42:in `buy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:43:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26917ms (ActiveRecord: 8.0ms | Allocations: 142363)


  
NoMethodError (undefined method `*' for nil:NilClass):
  
app/controllers/products_controller.rb:43:in `buy'
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:44:16 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2366ms (ActiveRecord: 5.3ms | Allocations: 20596)


  
ArgumentError (comparison of Integer with String failed):
  
app/controllers/products_controller.rb:45:in `<'
app/controllers/products_controller.rb:45:in `buy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:46:29 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23044ms (ActiveRecord: 8.7ms | Allocations: 176934)


  
NoMethodError (undefined method `deposit' for nil:NilClass):
  
app/controllers/products_controller.rb:47:in `buy'
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:47:00 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1989ms (ActiveRecord: 4.9ms | Allocations: 21178)


  
ArgumentError (comparison of String with 110 failed):
  
app/controllers/products_controller.rb:47:in `<'
app/controllers/products_controller.rb:47:in `buy'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:51:50 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 400 Bad Request in 2575ms (Views: 0.3ms | ActiveRecord: 8.5ms | Allocations: 128237)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:52:10 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 1431ms (Views: 0.2ms | ActiveRecord: 5.5ms | Allocations: 21232)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:52:31 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 1582ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 12968)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:56:19 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 19ms (ActiveRecord: 5.2ms | Allocations: 7577)


  
ArgumentError (When assigning attributes, you must pass a hash as an argument, Integer passed.):
  
app/controllers/products_controller.rb:50:in `buy'
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:56:32 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 5.3ms | Allocations: 7595)


  
ActiveModel::UnknownAttributeError (unknown attribute 'amount' for Product.):
  
app/controllers/products_controller.rb:50:in `buy'
Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:56:42 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.5ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 9], ["updated_at", "2023-01-26 01:56:42.502747"], ["id", 3]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-26 01:56:42.509062"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 46ms (Views: 0.3ms | ActiveRecord: 7.8ms | Allocations: 12679)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 01:57:03 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 400 Bad Request in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 359)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 02:07:48 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 400 Bad Request in 99ms (Views: 0.3ms | ActiveRecord: 8.9ms | Allocations: 3443)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:12:10 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-26 02:12:10.691731"], ["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1116)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:12:53 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-26 02:12:54.273938"], ["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 37ms (Views: 0.3ms | ActiveRecord: 8.2ms | Allocations: 12163)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 02:12:56 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 8], ["updated_at", "2023-01-26 02:12:57.006565"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 115], ["updated_at", "2023-01-26 02:12:57.010837"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 42ms (Views: 0.2ms | ActiveRecord: 5.1ms | Allocations: 9823)


Started GET "/profile" for ::1 at 2023-01-26 02:13:01 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 4701)


Started GET "/profile" for ::1 at 2023-01-26 02:13:27 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 258)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:13:34 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 215], ["updated_at", "2023-01-26 02:13:34.419388"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 1349)


Started POST "/buy?amount=2&product_id=3" for ::1 at 2023-01-26 02:13:40 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"2", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 6], ["updated_at", "2023-01-26 02:13:40.366351"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 45], ["updated_at", "2023-01-26 02:13:40.370931"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 4.4ms | Allocations: 5005)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:13:58 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 145], ["updated_at", "2023-01-26 02:13:58.460554"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.1ms | Allocations: 1039)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:13:59 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 245], ["updated_at", "2023-01-26 02:13:59.258297"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1038)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:13:59 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 345], ["updated_at", "2023-01-26 02:13:59.727708"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1024)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:14:00 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 445], ["updated_at", "2023-01-26 02:14:00.163799"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1024)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:14:00 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 545], ["updated_at", "2023-01-26 02:14:00.687911"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1024)


Started POST "/buy?amount=5&product_id=3" for ::1 at 2023-01-26 02:14:08 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"5", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 1], ["updated_at", "2023-01-26 02:14:08.244761"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 120], ["updated_at", "2023-01-26 02:14:08.249024"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 1708)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 02:14:26 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 0], ["updated_at", "2023-01-26 02:14:26.594836"], ["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 35], ["updated_at", "2023-01-26 02:14:26.599474"], ["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 1711)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 02:14:28 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 400 Bad Request in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 361)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=100" for ::1 at 2023-01-26 02:16:08 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 135], ["updated_at", "2023-01-26 02:16:08.733070"], ["id", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 35ms (Views: 0.2ms | ActiveRecord: 6.9ms | Allocations: 12163)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-26 02:16:16 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "rvRYLvV8wbsQ4NoR19Ymsi5q"], ["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 400 Bad Request in 21ms (Views: 0.1ms | ActiveRecord: 4.9ms | Allocations: 5076)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 19:48:29 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>"ter", "cost"=>94}}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 400 Bad Request in 122ms (Views: 0.2ms | ActiveRecord: 12.7ms | Allocations: 18395)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/products" for ::1 at 2023-01-26 19:50:04 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>"ter", "cost"=>94}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 400 Bad Request in 45ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 17656)


Started POST "/products" for ::1 at 2023-01-26 19:50:15 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Mars", "amount_available"=>"3", "cost"=>94}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 606)


Started POST "/products" for ::1 at 2023-01-26 19:50:28 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Bounty", "amount_available"=>"3", "cost"=>150}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (3.2ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Bounty"], ["amount_available", 3], ["cost", 150], ["seller_id", 4], ["created_at", "2023-01-26 19:50:28.585463"], ["updated_at", "2023-01-26 19:50:28.585463"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 3.1ms | ActiveRecord: 4.9ms | Allocations: 1241)


Started POST "/login" for ::1 at 2023-01-26 19:50:44 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"admin", "password"=>"[FILTERED]", "session"=>{"username"=>"admin", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (Views: 3.2ms | ActiveRecord: 0.3ms | Allocations: 435)


Started DELETE "/logout/all" for ::1 at 2023-01-26 19:50:53 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"admin", "password"=>"[FILTERED]", "session"=>{"username"=>"admin", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 3]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 455)


Started POST "/login" for ::1 at 2023-01-26 19:50:58 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"admin", "password"=>"[FILTERED]", "session"=>{"username"=>"admin", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "admin"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "admin@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "prRPcjA8pejrzSEgGKdEK6bK"], ["updated_at", "2023-01-26 19:50:58.731008"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 198ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 1549)


Started POST "/products" for ::1 at 2023-01-26 19:51:30 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"product_name"=>"Snickers", "amount_available"=>"10", "cost"=>100}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "prRPcjA8pejrzSEgGKdEK6bK"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("product_name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["product_name", "Snickers"], ["amount_available", 10], ["cost", 100], ["seller_id", 3], ["created_at", "2023-01-26 19:51:30.426566"], ["updated_at", "2023-01-26 19:51:30.426566"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 741)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (120.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_development"[0m
  [1m[35m (113.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_test"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (356.2ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (203.7ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "name" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-26 19:58:25.935577"], ["updated_at", "2023-01-26 19:58:25.935577"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (423.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_development"[0m
  [1m[35m (91.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_test"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (198.2ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (244.9ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-26 20:00:42.516343"], ["updated_at", "2023-01-26 20:00:42.516343"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-26 20:01:20 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "mingos"], ["password_digest", "[FILTERED]"], ["email", "mingos@mail.com"], ["auth_token", "QY8q3ZRu6tFADzpnY2mRkH4Y"], ["created_at", "2023-01-26 20:01:21.081031"], ["updated_at", "2023-01-26 20:01:21.081031"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 211ms (Views: 0.3ms | ActiveRecord: 7.3ms | Allocations: 8811)


Started POST "/users" for ::1 at 2023-01-26 20:02:25 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 197ms (ActiveRecord: 1.5ms | Allocations: 3598)


  
ActiveRecord::RecordInvalid (Validation failed: Username has already been taken, Email has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-26 20:03:22 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 196ms (ActiveRecord: 3.2ms | Allocations: 4410)


  
ActiveRecord::RecordInvalid (Validation failed: Username has already been taken, Email has already been taken):
  
app/controllers/users_controller.rb:8:in `create'
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-26 20:03:49 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 212ms (Views: 0.2ms | ActiveRecord: 6.5ms | Allocations: 10941)


Started POST "/users" for ::1 at 2023-01-26 20:03:57 +0000
Error occurred while parsing request parameters.
Contents:

{
	"user": {
		"username": nil,
		"password": "1234",
		"email": "mingos@mail.com",
        "role": "buyer"
	}
}
Processing by UsersController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 132)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/users_controller.rb:59:in `user_params'
app/controllers/users_controller.rb:8:in `create'
Started POST "/users" for ::1 at 2023-01-26 20:04:02 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 192ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1142)


Started POST "/users" for ::1 at 2023-01-26 20:04:08 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 194ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1182)


Started POST "/users" for ::1 at 2023-01-26 20:05:39 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 199ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 4991)


Started POST "/users" for ::1 at 2023-01-26 20:05:57 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 198ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 4856)


Started POST "/users" for ::1 at 2023-01-26 20:06:10 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 197ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 4837)


Started POST "/users" for ::1 at 2023-01-26 20:06:29 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>nil}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 2752)


Started POST "/users" for ::1 at 2023-01-26 20:07:16 +0000
  
NoMethodError (undefined method `email' for User:Class):
  
app/models/user.rb:14:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
Started POST "/users" for ::1 at 2023-01-26 20:07:23 +0000
  
NameError (undefined local variable or method `email' for User:Class):
  
app/models/user.rb:14:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
Started POST "/users" for ::1 at 2023-01-26 20:07:35 +0000
  
NoMethodError (undefined method `email' for User:Class):
  
app/models/user.rb:14:in `<class:User>'
app/models/user.rb:1:in `<top (required)>'
Started POST "/users" for ::1 at 2023-01-26 20:07:56 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>nil}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.9ms | Allocations: 3122)


  
NoMethodError (undefined method `validate' for true:TrueClass):
  
app/controllers/users_controller.rb:9:in `create'
Started POST "/users" for ::1 at 2023-01-26 20:08:41 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>nil, "password"=>"[FILTERED]", "email"=>nil, "role"=>nil}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 13ms (Views: 0.1ms | ActiveRecord: 3.4ms | Allocations: 5646)


Started POST "/users" for ::1 at 2023-01-26 20:09:27 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 193ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1540)


Started DELETE "/logout/all" for ::1 at 2023-01-26 20:09:38 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 873)


Started POST "/login" for ::1 at 2023-01-26 20:09:46 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 200ms (ActiveRecord: 1.3ms | Allocations: 1411)


  
ActiveRecord::RecordInvalid (Validation failed: Password can't be blank):
  
app/controllers/sessions_controller.rb:35:in `allow_token_to_be_used_only_once_for'
app/controllers/sessions_controller.rb:7:in `create'
Started POST "/login" for ::1 at 2023-01-26 20:10:38 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["updated_at", "2023-01-26 20:10:39.410316"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 212ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 5978)


Started GET "/profile" for ::1 at 2023-01-26 20:11:07 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 480)


Started POST "/users" for ::1 at 2023-01-26 20:12:35 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos12345678@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 11ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 4423)


Started POST "/users" for ::1 at 2023-01-26 20:12:48 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos12345678@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 10ms (Views: 0.3ms | ActiveRecord: 3.1ms | Allocations: 4423)


Started POST "/users" for ::1 at 2023-01-26 20:13:03 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos12345678@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 18ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 4423)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-26 20:13:17 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos12345678@mail.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 400 Bad Request in 25ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 10931)


Started PUT "/users" for ::1 at 2023-01-26 20:13:39 +0000
  
ActionController::RoutingError (No route matches [PUT] "/users"):
  
Started PATCH "/users" for ::1 at 2023-01-26 20:13:50 +0000
  
ActionController::RoutingError (No route matches [PATCH] "/users"):
  
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started PATCH "/user" for ::1 at 2023-01-26 23:56:12 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [PATCH] "/user"):
  
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started PATCH "/user" for ::1 at 2023-01-27 00:00:05 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [PATCH] "/user"):
  
Started PUT "/user" for ::1 at 2023-01-27 00:00:17 +0000
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#update as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 24ms (ActiveRecord: 6.1ms | Allocations: 7178)


  
NameError (undefined local variable or method `user' for #<UsersController:0x00000000007238>):
  
app/controllers/users_controller.rb:29:in `update'
Started PUT "/user" for ::1 at 2023-01-27 00:00:43 +0000
Processing by UsersController#update as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "mingos12345678@mail.com"], ["updated_at", "2023-01-27 00:00:44.205962"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 5.2ms | Allocations: 5172)


Started PUT "/user" for ::1 at 2023-01-27 00:01:09 +0000
Processing by UsersController#update as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 4078)


  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started POST "/users" for ::1 at 2023-01-27 00:13:16 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"admin", "password"=>"[FILTERED]", "email"=>"admin@mail.com", "name"=>"Admin", "role"=>"admin"}}
[31mUnpermitted parameter: :name. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f09c9a6f020>, params: {"user"=>{"username"=>"admin", "password"=>"[FILTERED]", "email"=>"admin@mail.com", "name"=>"Admin", "role"=>"admin"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "admin"], ["password_digest", "[FILTERED]"], ["email", "admin@mail.com"], ["role", 0], ["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["created_at", "2023-01-27 00:13:17.351419"], ["updated_at", "2023-01-27 00:13:17.351419"]]
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 248ms (Views: 0.2ms | ActiveRecord: 19.4ms | Allocations: 6698)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started GET "/users" for ::1 at 2023-01-27 00:19:47 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 48ms (Views: 0.2ms | ActiveRecord: 7.7ms | Allocations: 7264)


  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users" for ::1 at 2023-01-27 00:22:58 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 500 Internal Server Error in 51ms (ActiveRecord: 5.7ms | Allocations: 10034)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/user.rb:32:in `profile_in_json'
app/controllers/users_controller.rb:24:in `block in index'
app/controllers/users_controller.rb:23:in `index'
Started GET "/users" for ::1 at 2023-01-27 00:23:17 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 3.3ms | Allocations: 4961)


Started GET "/profile" for ::1 at 2023-01-27 00:23:25 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "eftMPy7HSEcbbXehKYrfsQBz"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.4ms | Allocations: 2738)


  
ActionView::MissingTemplate (Missing template users/profile, api/profile, application/profile with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/mnt/c/Repos/VendingMachine/app/views"
):
  
app/controllers/users_controller.rb:71:in `render_json_profile'
app/controllers/users_controller.rb:17:in `profile'
Started POST "/login" for ::1 at 2023-01-27 00:23:42 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 462)


Started DELETE "/logout/all" for ::1 at 2023-01-27 00:23:46 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 4810)


Started POST "/login" for ::1 at 2023-01-27 00:23:49 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["updated_at", "2023-01-27 00:23:49.199132"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 199ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 2020)


Started GET "/profile" for ::1 at 2023-01-27 00:23:55 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 759)


  
ActionView::MissingTemplate (Missing template users/profile, api/profile, application/profile with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/mnt/c/Repos/VendingMachine/app/views"
):
  
app/controllers/users_controller.rb:71:in `render_json_profile'
app/controllers/users_controller.rb:17:in `profile'
Started GET "/profile" for ::1 at 2023-01-27 00:24:11 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 4650)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/users/1" for ::1 at 2023-01-27 00:45:41 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
Filter chain halted as :check_if_admin rendered or redirected
Completed 401 Unauthorized in 31ms (Views: 0.2ms | ActiveRecord: 6.1ms | Allocations: 10055)


Started GET "/users" for ::1 at 2023-01-27 00:46:02 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
Filter chain halted as :check_if_admin rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 254)


Started GET "/users" for ::1 at 2023-01-27 00:46:20 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 4915)


Started DELETE "/users/1" for ::1 at 2023-01-27 00:46:41 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.8ms | Allocations: 548)


  
NameError (undefined local variable or method `user' for #<UsersController:0x000000000089a8>):
  
app/controllers/users_controller.rb:41:in `destroy'
Started DELETE "/users/1" for ::1 at 2023-01-27 00:46:57 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 5186)


Started DELETE "/users/1" for ::1 at 2023-01-27 00:47:02 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 0.7ms | Allocations: 355)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=1):
  
app/controllers/users_controller.rb:40:in `destroy'
Started DELETE "/users/1" for ::1 at 2023-01-27 00:49:14 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 22451ms (ActiveRecord: 3.3ms | Allocations: 121794)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=1):
  
app/controllers/users_controller.rb:41:in `destroy'
Started DELETE "/users/1" for ::1 at 2023-01-27 00:49:42 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 3.5ms | Allocations: 5432)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/users_controller.rb:44:in `destroy'
Started GET "/users" for ::1 at 2023-01-27 00:56:06 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 8.8ms | Allocations: 7871)


Started GET "/users" for ::1 at 2023-01-27 00:56:08 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 517)


Started DELETE "/users/1" for ::1 at 2023-01-27 00:58:54 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 19ms (ActiveRecord: 9.8ms | Allocations: 4820)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:44:in `destroy'
Started DELETE "/users/1" for ::1 at 2023-01-27 00:59:09 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 4879)


Started POST "/users" for ::1 at 2023-01-27 01:01:11 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "mingos"], ["password_digest", "[FILTERED]"], ["email", "mingos@mail.com"], ["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["created_at", "2023-01-27 01:01:11.653828"], ["updated_at", "2023-01-27 01:01:11.653828"]]
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 206ms (Views: 0.2ms | ActiveRecord: 9.3ms | Allocations: 4863)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:21 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-27 01:01:22.293006"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 4.7ms | Allocations: 5906)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:23 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-27 01:01:23.592492"], ["id", 3]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 1024)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:24 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-27 01:01:24.738860"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1023)


Started POST "/reset" for ::1 at 2023-01-27 01:01:30 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-27 01:01:30.740215"], ["id", 3]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 2821)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:34 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-27 01:01:35.089900"], ["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 3.8ms | Allocations: 5750)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:35 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-27 01:01:35.771962"], ["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 1002)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:36 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-27 01:01:36.737369"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1020)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:01:37 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 400], ["updated_at", "2023-01-27 01:01:37.326312"], ["id", 3]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 1020)


Started POST "/products" for ::1 at 2023-01-27 01:02:06 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Snickers", "amount_available"=>"10", "cost"=>100}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "prRPcjA8pejrzSEgGKdEK6bK"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 331)


Started POST "/users" for ::1 at 2023-01-27 01:02:14 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"stocker", "password"=>"[FILTERED]", "email"=>"stocker@mail.com", "name"=>"Stocker", "role"=>"stocker"}}
[31mUnpermitted parameter: :name. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f228173f820>, params: {"user"=>{"username"=>"stocker", "password"=>"[FILTERED]", "email"=>"stocker@mail.com", "name"=>"Stocker", "role"=>"stocker"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stocker"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stocker@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "stocker"], ["password_digest", "[FILTERED]"], ["email", "stocker@mail.com"], ["role", 2], ["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["created_at", "2023-01-27 01:02:15.105605"], ["updated_at", "2023-01-27 01:02:15.105605"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 202ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 4144)


Started POST "/products" for ::1 at 2023-01-27 01:02:22 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Snickers", "amount_available"=>"10", "cost"=>100}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Snickers"], ["amount_available", 10], ["cost", 100], ["seller_id", 4], ["created_at", "2023-01-27 01:02:22.239053"], ["updated_at", "2023-01-27 01:02:22.239053"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 4.2ms | Allocations: 6191)


  
NoMethodError (undefined method `name' for #<User id: 4, username: "stocker", password_digest: [FILTERED], email: "stocker@mail.com", role: "stocker", deposit: 0, auth_token: "TdmqXzyME5WXtjpKQ8zXh1w8", created_at: "2023-01-27 01:02:15.105605000 +0000", updated_at: "2023-01-27 01:02:15.105605000 +0000">):
  
app/controllers/products_controller.rb:73:in `render_json_product'
app/controllers/products_controller.rb:22:in `create'
Started POST "/products" for ::1 at 2023-01-27 01:03:35 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Snickers", "amount_available"=>"10", "cost"=>100}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Snickers"], ["amount_available", 10], ["cost", 100], ["seller_id", 4], ["created_at", "2023-01-27 01:03:35.477333"], ["updated_at", "2023-01-27 01:03:35.477333"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 6.0ms | Allocations: 7135)


Started POST "/products" for ::1 at 2023-01-27 01:11:20 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"amount_available"=>20}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "fMpvXWYJsn8RdLcDdo3wiUPW"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 50ms (Views: 0.5ms | ActiveRecord: 7.3ms | Allocations: 5094)


Started POST "/products" for ::1 at 2023-01-27 01:11:36 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"amount_available"=>20}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.6ms | Allocations: 4170)


  
NoMethodError (undefined method `%' for nil:NilClass):
  
config/initializers/cost_validations.rb:3:in `validate_multipleness'
app/models/product.rb:7:in `block in <class:Product>'
app/controllers/products_controller.rb:21:in `create'
Started POST "/products" for ::1 at 2023-01-27 01:11:55 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Mars", "amount_available"=>"13", "cost"=>120}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (1.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mars"], ["amount_available", 13], ["cost", 120], ["seller_id", 4], ["created_at", "2023-01-27 01:11:55.792579"], ["updated_at", "2023-01-27 01:11:55.792579"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.0ms | Allocations: 891)


  
NoMethodError (undefined method `is_stocker?' for #<User id: 4, username: "stocker", password_digest: [FILTERED], email: "stocker@mail.com", role: "stocker", deposit: 0, auth_token: "TdmqXzyME5WXtjpKQ8zXh1w8", created_at: "2023-01-27 01:02:15.105605000 +0000", updated_at: "2023-01-27 01:02:15.105605000 +0000">):
  
app/controllers/products_controller.rb:73:in `render_json_product'
app/controllers/products_controller.rb:22:in `create'
Started POST "/products" for ::1 at 2023-01-27 01:12:15 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Mars", "amount_available"=>"13", "cost"=>120}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mars"], ["amount_available", 13], ["cost", 120], ["seller_id", 4], ["created_at", "2023-01-27 01:12:16.179339"], ["updated_at", "2023-01-27 01:12:16.179339"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 23ms (ActiveRecord: 12.6ms | Allocations: 7173)


  
NoMethodError (undefined method `product_in_json' for #<ProductsController:0x0000000001af40>):
  
app/controllers/products_controller.rb:73:in `render_json_product'
app/controllers/products_controller.rb:22:in `create'
Started POST "/products" for ::1 at 2023-01-27 01:12:55 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Mars", "amount_available"=>"13", "cost"=>120}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "TdmqXzyME5WXtjpKQ8zXh1w8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mars"], ["amount_available", 13], ["cost", 120], ["seller_id", 4], ["created_at", "2023-01-27 01:12:55.714109"], ["updated_at", "2023-01-27 01:12:55.714109"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 7160)


Started POST "/product/2" for ::1 at 2023-01-27 01:13:25 +0000
  
ActionController::RoutingError (No route matches [POST] "/product/2"):
  
Started PUT "/product/2" for ::1 at 2023-01-27 01:13:43 +0000
  
ActionController::RoutingError (No route matches [PUT] "/product/2"):
  
Started PUT "/products/2" for ::1 at 2023-01-27 01:14:10 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>20}, "id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.4ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 20], ["updated_at", "2023-01-27 01:14:10.495757"], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 6.3ms | Allocations: 8775)


Started GET "/products" for ::1 at 2023-01-27 01:15:30 +0000
Processing by ProductsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 224)


Started GET "/product/1" for ::1 at 2023-01-27 01:15:38 +0000
  
ActionController::RoutingError (No route matches [GET] "/product/1"):
  
Started GET "/products/1" for ::1 at 2023-01-27 01:15:47 +0000
Processing by ProductsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms | Allocations: 220)


  
NoMethodError (undefined method `stocker?' for nil:NilClass):
  
app/controllers/products_controller.rb:73:in `render_json_product'
app/controllers/products_controller.rb:14:in `show'
Started GET "/products/1" for ::1 at 2023-01-27 01:16:28 +0000
Processing by ProductsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 4.7ms | Allocations: 7711)


Started GET "/products/1" for ::1 at 2023-01-27 01:18:00 +0000
Processing by ProductsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 4.6ms | Allocations: 7688)


Started GET "/products" for ::1 at 2023-01-27 01:18:26 +0000
Processing by ProductsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 396)


Started GET "/products" for ::1 at 2023-01-27 01:18:34 +0000
Processing by ProductsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 220)


Started GET "/products" for ::1 at 2023-01-27 01:18:51 +0000
Processing by ProductsController#index as */*
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.9ms | Allocations: 4725)


  
NoMethodError (undefined method `product_in_json' for #<User id: 2, username: "admin", password_digest: [FILTERED], email: "admin@mail.com", role: "admin", deposit: 0, auth_token: "k1wDLPxYoVPQVAgXshNvbMeV", created_at: "2023-01-27 00:13:17.351419000 +0000", updated_at: "2023-01-27 00:13:17.351419000 +0000">):
  
app/controllers/products_controller.rb:13:in `block in index'
app/controllers/products_controller.rb:12:in `index'
Started GET "/products" for ::1 at 2023-01-27 01:19:22 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 4.9ms | Allocations: 8864)


Started PUT "/products/2" for ::1 at 2023-01-27 01:19:49 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>20}, "id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1361)


Started PUT "/products/2" for ::1 at 2023-01-27 01:20:13 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>150}, "id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.4ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 150], ["updated_at", "2023-01-27 01:20:13.713020"], ["id", 2]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 1047)


Started GET "/products" for ::1 at 2023-01-27 01:20:17 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 1623)


Started GET "/users" for ::1 at 2023-01-27 01:20:55 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.1ms | Allocations: 5240)


  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `order_by' for #<ActiveRecord::Relation [#<User id: 2, username: "admin", password_digest: [FILTERED], email: "admin@mail.com", role: "admin", deposit: 0, auth_token: "k1wDLPxYoVPQVAgXshNvbMeV", created_at: "2023-01-27 00:13:17.351419000 +0000", updated_at: "2023-01-27 00:13:17.351419000 +0000">, #<User id: 3, username: "mingos", password_digest: [FILTERED], email: "mingos@mail.com", role: "buyer", deposit: 400, auth_token: "jHC6SLHgutReXAYuPVNFZgDC", created_at: "2023-01-27 01:01:11.653828000 +0000", updated_at: "2023-01-27 01:01:37.326312000 +0000">, #<User id: 4, username: "stocker", password_digest: [FILTERED], email: "stocker@mail.com", role: "stocker", deposit: 0, auth_token: "TdmqXzyME5WXtjpKQ8zXh1w8", created_at: "2023-01-27 01:02:15.105605000 +0000", updated_at: "2023-01-27 01:02:15.105605000 +0000">]>):
  
app/controllers/users_controller.rb:24:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/users" for ::1 at 2023-01-27 01:21:09 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 5123)


Started GET "/products" for ::1 at 2023-01-27 01:21:24 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 8896)


Started GET "/profile" for ::1 at 2023-01-27 01:21:42 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "YKvwegqvQ68GxG6YcZka1A82"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 484)


Started POST "/login" for ::1 at 2023-01-27 01:21:46 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 422)


Started DELETE "/logout/all" for ::1 at 2023-01-27 01:21:49 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 3]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 368)


Started POST "/login" for ::1 at 2023-01-27 01:21:53 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["updated_at", "2023-01-27 01:21:53.228393"], ["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 204ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1401)


Started GET "/profile" for ::1 at 2023-01-27 01:21:59 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 254)


Started POST "/buy?amount=1&product_id=3" for ::1 at 2023-01-27 01:22:11 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 12], ["updated_at", "2023-01-27 01:22:11.218870"], ["id", 3]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-27 01:22:11.226670"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 2072)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:22:25 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "jHC6SLHgutReXAYuPVNFZgDC"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 219)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:22:29 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-27 01:22:29.053034"], ["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1023)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:22:36 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-27 01:22:36.746505"], ["id", 3]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1019)


Started GET "/products" for ::1 at 2023-01-27 01:22:40 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (2.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 5.2ms | Allocations: 1641)


Started POST "/buy?amount=1&product_id=1" for ::1 at 2023-01-27 01:22:54 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "9kHK5UHAfKhm13DN9Pb1fv1v"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.4ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 9], ["updated_at", "2023-01-27 01:22:54.199863"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-27 01:22:54.206497"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 1691)


Started GET "/products" for ::1 at 2023-01-27 01:23:00 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 1638)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (117.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_development"[0m
  [1m[35m (102.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_test"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (202.8ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (199.0ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20230122214706)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122214706"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20230122215226)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20230122215226"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-27 01:34:09.573823"], ["updated_at", "2023-01-27 01:34:09.573823"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/users" for ::1 at 2023-01-27 01:34:50 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"mingos", "password"=>"[FILTERED]", "email"=>"mingos@mail.com", "role"=>"buyer"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mingos@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "mingos"], ["password_digest", "[FILTERED]"], ["email", "mingos@mail.com"], ["auth_token", "xsYM327iCH7yN55Qoh1yQ4eE"], ["created_at", "2023-01-27 01:34:51.112833"], ["updated_at", "2023-01-27 01:34:51.112833"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 214ms (Views: 0.3ms | ActiveRecord: 7.2ms | Allocations: 9003)


Started DELETE "/logout/all" for ::1 at 2023-01-27 01:35:01 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 4934)


Started POST "/login" for ::1 at 2023-01-27 01:35:04 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["updated_at", "2023-01-27 01:35:05.226768"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 207ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 5852)


Started POST "/users" for ::1 at 2023-01-27 01:36:55 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"stocker", "password"=>"[FILTERED]", "email"=>"stocker@mail.com", "role"=>"stocker"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stocker"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stocker@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "stocker"], ["password_digest", "[FILTERED]"], ["email", "stocker@mail.com"], ["role", 2], ["auth_token", "KuiVzxRURHvCB5iSfRFeqeXT"], ["created_at", "2023-01-27 01:36:55.539222"], ["updated_at", "2023-01-27 01:36:55.539222"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 199ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 1126)


Started POST "/users" for ::1 at 2023-01-27 01:37:09 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"admin", "password"=>"[FILTERED]", "email"=>"admin@mail.com", "role"=>"admin"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "admin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "admin"], ["password_digest", "[FILTERED]"], ["email", "admin@mail.com"], ["role", 0], ["auth_token", "5ve742G2XenmP3zDy7zEEVL8"], ["created_at", "2023-01-27 01:37:10.085462"], ["updated_at", "2023-01-27 01:37:10.085462"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 200ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 962)


Started GET "/profile" for ::1 at 2023-01-27 01:37:22 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 410)


Started GET "/profile" for ::1 at 2023-01-27 01:37:57 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 244)


Started GET "/users" for ::1 at 2023-01-27 01:38:12 +0000
Processing by UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "5ve742G2XenmP3zDy7zEEVL8"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 735)


Started DELETE "/users/2" for ::1 at 2023-01-27 01:38:23 +0000
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "5ve742G2XenmP3zDy7zEEVL8"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 756)


Started POST "/users" for ::1 at 2023-01-27 01:38:28 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"stocker", "password"=>"[FILTERED]", "email"=>"stocker@mail.com", "role"=>"stocker"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stocker"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stocker@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "stocker"], ["password_digest", "[FILTERED]"], ["email", "stocker@mail.com"], ["role", 2], ["auth_token", "xAXh4bcCbKoTJkw46HgWWwpb"], ["created_at", "2023-01-27 01:38:28.950830"], ["updated_at", "2023-01-27 01:38:28.950830"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 198ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 973)


Started PUT "/user" for ::1 at 2023-01-27 01:38:46 +0000
Processing by UsersController#update as */*
  Parameters: {"user"=>{"email"=>"mingos12345678@mail.com"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "mingos12345678@mail.com"], ["updated_at", "2023-01-27 01:38:46.122745"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 1091)


Started POST "/deposit?deposit=150" for ::1 at 2023-01-27 01:39:01 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"150"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 2052)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:39:19 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-27 01:39:19.345899"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1020)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:39:20 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-27 01:39:20.901281"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1020)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:39:21 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 300], ["updated_at", "2023-01-27 01:39:21.508477"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 1020)


Started POST "/reset" for ::1 at 2023-01-27 01:39:46 +0000
Processing by UsersController#reset as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-27 01:39:46.904074"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1026)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:39:50 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 100], ["updated_at", "2023-01-27 01:39:50.125763"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 1020)


Started POST "/deposit?deposit=100" for ::1 at 2023-01-27 01:39:50 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"100"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 200], ["updated_at", "2023-01-27 01:39:50.783165"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.1ms | Allocations: 1020)


Started POST "/deposit?deposit=50" for ::1 at 2023-01-27 01:39:54 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"50"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 250], ["updated_at", "2023-01-27 01:39:54.898692"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 1020)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 01:39:58 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 270], ["updated_at", "2023-01-27 01:39:58.681655"], ["id", 1]]
  [1m[36mTRANSACTION (40.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 50ms (Views: 0.2ms | ActiveRecord: 41.6ms | Allocations: 1020)


Started GET "/products/1" for ::1 at 2023-01-27 01:40:11 +0000
Processing by ProductsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 17ms (ActiveRecord: 2.9ms | Allocations: 2224)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=1):
  
app/controllers/products_controller.rb:81:in `set_product'
Started POST "/products" for ::1 at 2023-01-27 01:40:42 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Mars", "amount_available"=>"13", "cost"=>120}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "xAXh4bcCbKoTJkw46HgWWwpb"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mars"], ["amount_available", 13], ["cost", 120], ["seller_id", 4], ["created_at", "2023-01-27 01:40:42.834062"], ["updated_at", "2023-01-27 01:40:42.834062"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 5272)


Started POST "/products" for ::1 at 2023-01-27 01:41:06 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Snickers", "amount_available"=>"13", "cost"=>70}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "xAXh4bcCbKoTJkw46HgWWwpb"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Snickers"], ["amount_available", 13], ["cost", 70], ["seller_id", 4], ["created_at", "2023-01-27 01:41:06.871820"], ["updated_at", "2023-01-27 01:41:06.871820"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 739)


Started POST "/products" for ::1 at 2023-01-27 01:41:18 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Bounty", "amount_available"=>"0", "cost"=>80}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "xAXh4bcCbKoTJkw46HgWWwpb"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bounty"], ["amount_available", 0], ["cost", 80], ["seller_id", 4], ["created_at", "2023-01-27 01:41:18.578144"], ["updated_at", "2023-01-27 01:41:18.578144"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.1ms | Allocations: 738)


Started GET "/products/1" for ::1 at 2023-01-27 01:41:34 +0000
Processing by ProductsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1569)


Started GET "/products" for ::1 at 2023-01-27 01:41:43 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.8ms | Allocations: 1225)


Started PUT "/products/2" for ::1 at 2023-01-27 01:42:08 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>12}, "id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "k1wDLPxYoVPQVAgXshNvbMeV"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 229)


Started POST "/users" for ::1 at 2023-01-27 01:42:34 +0000
Processing by UsersController#create as */*
  Parameters: {"user"=>{"username"=>"stocker 2", "password"=>"[FILTERED]", "email"=>"stocker2@mail.com", "role"=>"stocker"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "stocker 2"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stocker2@mail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password_digest", "email", "role", "auth_token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["username", "stocker 2"], ["password_digest", "[FILTERED]"], ["email", "stocker2@mail.com"], ["role", 2], ["auth_token", "BVcRVpKz4QuzuyEJqUdUoy2B"], ["created_at", "2023-01-27 01:42:34.662970"], ["updated_at", "2023-01-27 01:42:34.662970"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 199ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 958)


Started POST "/products" for ::1 at 2023-01-27 01:43:36 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Bounty", "amount_available"=>"0", "cost"=>80}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "BVcRVpKz4QuzuyEJqUdUoy2B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "amount_available", "cost", "seller_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bounty"], ["amount_available", 0], ["cost", 80], ["seller_id", 5], ["created_at", "2023-01-27 01:43:36.074629"], ["updated_at", "2023-01-27 01:43:36.074629"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 738)


Started GET "/products" for ::1 at 2023-01-27 01:43:40 +0000
Processing by ProductsController#index as */*
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 1427)


Started PUT "/products/3" for ::1 at 2023-01-27 01:44:15 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>12}, "id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "BVcRVpKz4QuzuyEJqUdUoy2B"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 12], ["updated_at", "2023-01-27 01:44:15.647086"], ["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1050)


Started PUT "/products/4" for ::1 at 2023-01-27 01:44:28 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>12}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "BVcRVpKz4QuzuyEJqUdUoy2B"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 12], ["updated_at", "2023-01-27 01:44:28.097299"], ["id", 4]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 998)


Started PUT "/products/3" for ::1 at 2023-01-27 01:46:34 +0000
  
SyntaxError (/mnt/c/Repos/VendingMachine/app/controllers/products_controller.rb:8: syntax error, unexpected '\n', expecting =>):
  
app/controllers/products_controller.rb:8: syntax error, unexpected '\n', expecting =>
app/controllers/products_controller.rb:8: syntax error, unexpected '\n', expecting =>
Started PUT "/products/3" for ::1 at 2023-01-27 01:46:55 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>12}, "id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "BVcRVpKz4QuzuyEJqUdUoy2B"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Filter chain halted as :check_if_seller_from_product rendered or redirected
Completed 400 Bad Request in 17ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 7283)


  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
Started PUT "/products/3" for ::1 at 2023-01-27 01:49:46 +0000
Processing by ProductsController#update as */*
  Parameters: {"product"=>{"amount_available"=>12}, "id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "xAXh4bcCbKoTJkw46HgWWwpb"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 7642)


Started POST "/buy?amount=1&product_id=1" for ::1 at 2023-01-27 01:50:05 +0000
Processing by ProductsController#buy as */*
  Parameters: {"amount"=>"1", "product_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Update (0.4ms)[0m  [1m[33mUPDATE "products" SET "amount_available" = $1, "updated_at" = $2 WHERE "products"."id" = $3[0m  [["amount_available", 12], ["updated_at", "2023-01-27 01:50:05.017022"], ["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 0], ["updated_at", "2023-01-27 01:50:05.025268"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 2116)


  [1m[36mUser Load (16.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (role is stocker)[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (role is stocker)[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = $1[0m  [["role", 0]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (role is 'stocker')[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (role like 'stocker')[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = $1[0m  [["role", 2]]
  [1m[36mUser Pluck (0.2ms)[0m  [1m[34mSELECT "users"."id" FROM "users" WHERE "users"."role" = $1[0m  [["role", 2]]
Started GET "/profile" for ::1 at 2023-01-27 02:33:53 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixMq8"], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 4738)


Started GET "/profile" for ::1 at 2023-01-27 02:33:59 +0000
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "da8Pytrt27tJhksxFWEixsMq8"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.1ms | ActiveRecord: 6.0ms | Allocations: 2726)


Started POST "/login" for ::1 at 2023-01-27 02:34:03 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 9ms (Views: 0.1ms | ActiveRecord: 4.9ms | Allocations: 2269)


Started DELETE "/logout/all" for ::1 at 2023-01-27 02:34:05 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 356)


Started POST "/login" for ::1 at 2023-01-27 02:34:08 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "PUdFA9MVjA4bDX1sk3LKazsZ"], ["updated_at", "2023-01-27 02:34:08.231232"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 224ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 1394)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/users" for ::1 at 2023-01-27 03:27:20 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#index as */*
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "5ve742G2XenmP3zDy7zEEVL8"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 5.4ms | Allocations: 10692)


Started POST "/login" for ::1 at 2023-01-27 03:27:28 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 465)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:27:30 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 7ms (Views: 2.7ms | ActiveRecord: 2.0ms | Allocations: 477)


Started POST "/login" for ::1 at 2023-01-27 03:27:32 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "2dMt4B96YTjiuSTHYrLSH4gm"], ["updated_at", "2023-01-27 03:27:32.519498"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 210ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 1946)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:27:49 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "2dMt4B96YTjiuSTHYrLSH4gm"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 20], ["updated_at", "2023-01-27 03:27:49.425871"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 15ms (Views: 4.2ms | ActiveRecord: 1.4ms | Allocations: 1076)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:27:51 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "2dMt4B96YTjiuSTHYrLSH4gm"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 40], ["updated_at", "2023-01-27 03:27:51.757558"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 1023)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:27:55 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "2dMt4B96YTjiuSTHYrLSH4gm"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "deposit" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["deposit", 60], ["updated_at", "2023-01-27 03:27:55.172951"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1023)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:31:48 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", ""], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 17ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 5218)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:32:04 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "nil"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 233)


Started POST "/deposit?deposit=20" for ::1 at 2023-01-27 03:32:12 +0000
Processing by UsersController#deposit as */*
  Parameters: {"deposit"=>"20"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "null"], ["LIMIT", 1]]
Filter chain halted as :get_user_by_token rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 230)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started DELETE "/logout/all" for ::1 at 2023-01-27 03:40:33 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <top (required)> at /mnt/c/Repos/VendingMachine/app/controllers/application_controller.rb:1)
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 6.1ms | Allocations: 10198)


Started POST "/login" for ::1 at 2023-01-27 03:40:35 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "WRfb6L9g3qpLGeDm8k28TGR2"], ["updated_at", "2023-01-27 03:40:36.074282"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 195ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 2045)


Started POST "/login" for ::1 at 2023-01-27 03:40:39 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 278)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:40:42 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 344)


Started POST "/login" for ::1 at 2023-01-27 03:40:43 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "qEdJCkN2w9HuTtrWwZCqNQUf"], ["updated_at", "2023-01-27 03:40:44.143310"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 192ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 1031)


Started POST "/login" for ::1 at 2023-01-27 03:41:26 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6067ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 127948)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:41:51 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 2027ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 29647)


Started POST "/login" for ::1 at 2023-01-27 03:42:06 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "n9xNzJL6iucX6JceGcRevD3Y"], ["updated_at", "2023-01-27 03:42:20.751802"], ["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 14455ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 27140)


Started POST "/login" for ::1 at 2023-01-27 03:43:14 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1559ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 29152)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:43:20 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 3173ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 24821)


Started POST "/login" for ::1 at 2023-01-27 03:43:36 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 205ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 4566)


Started POST "/login" for ::1 at 2023-01-27 03:43:52 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "xgvh4HFAPZh2jCd1rinnjT3v"], ["updated_at", "2023-01-27 03:43:53.296273"], ["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 212ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 5680)


Started POST "/login" for ::1 at 2023-01-27 03:43:55 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 254)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:43:58 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 338)


Started POST "/login" for ::1 at 2023-01-27 03:45:04 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["username", "mingos"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "mingos12345678@mail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["auth_token", "fNAW6rqDhb55GbgB4uhqRTZf"], ["updated_at", "2023-01-27 03:45:05.475474"], ["id", 1]]
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 247ms (Views: 0.2ms | ActiveRecord: 48.6ms | Allocations: 5680)


Started POST "/login" for ::1 at 2023-01-27 03:45:07 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2132)


Started POST "/login" for ::1 at 2023-01-27 03:45:20 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.8ms | Allocations: 4533)


  
NoMethodError (undefined method `to_sentence' for #<ActiveModel::Errors [#<ActiveModel::Error attribute=auth_token, type=Login already made for this user, please clear all your sessions., options={}>]>):
  
app/controllers/sessions_controller.rb:10:in `create'
Started POST "/login" for ::1 at 2023-01-27 03:45:48 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 9ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 4756)


Started POST "/login" for ::1 at 2023-01-27 03:46:36 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 9ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 4593)


Started DELETE "/logout/all" for ::1 at 2023-01-27 03:46:39 +0000
Processing by SessionsController#destroy as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "auth_token" = $1 WHERE "users"."id" = $2[0m  [["auth_token", nil], ["id", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 355)


Started POST "/login" for ::1 at 2023-01-27 03:46:43 +0000
Processing by SessionsController#create as */*
  Parameters: {"username"=>"mingos", "password"=>"[FILTERED]", "session"=>{"username"=>"mingos", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "mingos"], ["LIMIT", 1]]
Completed 401 Unauthorized in 189ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 295)


DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/actionpack-7.0.4.1/lib/action_controller/railtie.rb:80)
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/mingos/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/activerecord-7.0.4.1/lib/active_record/railtie.rb:264)
Started GET "/profile" for ::1 at 2023-01-27 04:18:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#profile as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT $2[0m  [["auth_token", "5ve742G2XenmP3zDy7zEEVL8"], ["LIMIT", 1]]
Completed 200 OK in 41ms (Views: 0.3ms | ActiveRecord: 5.2ms | Allocations: 10042)


DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (112.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_development"[0m
  [1m[35m (97.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "vending_machine_test"[0m
  [1m[35m (326.6ms)[0m  [1m[35mCREATE DATABASE "vending_machine_development" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35m (183.0ms)[0m  [1m[35mCREATE DATABASE "vending_machine_test" ENCODING = 'unicode' TEMPLATE = "template0"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230122214706);

[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-27 04:54:48.032587"], ["updated_at", "2023-01-27 04:54:48.032587"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "bf0832e6bcc5431ec2a15d8f75d9aa2ab021e9a5"], ["created_at", "2023-01-27 04:54:48.036294"], ["updated_at", "2023-01-27 04:54:48.036294"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "amount_available" integer, "cost" integer, "seller_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password_digest" character varying, "email" character varying, "role" integer DEFAULT 1, "deposit" integer DEFAULT 0, "auth_token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230122215226)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230122214706);

[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-01-27 04:54:48.114350"], ["updated_at", "2023-01-27 04:54:48.114350"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2023-01-27 04:54:48.116406"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "bf0832e6bcc5431ec2a15d8f75d9aa2ab021e9a5"], ["created_at", "2023-01-27 04:54:48.118186"], ["updated_at", "2023-01-27 04:54:48.118186"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from require at /mnt/c/Repos/VendingMachine/bin/rails:9)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4989826921652987715)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
